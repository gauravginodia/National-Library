{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/default.jpeg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-1df8cd32\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"product-page\"\n};\nconst _hoisted_2 = {\n  class: \"container product-details-container\"\n};\nconst _hoisted_3 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-4 product-image\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"text-center\"\n};\nconst _hoisted_7 = {\n  class: \"col-md-8 product-details\"\n};\nconst _hoisted_8 = {\n  class: \"text-muted\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"margin-top\": \"0%\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_10 = {\n  class: \"text-justify\",\n  style: {\n    \"margin-top\": \"1%\"\n  }\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"mt-4\"\n}, \"Reviews:\", -1 /* HOISTED */));\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = {\n  class: \"table\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"User Name\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Feedback\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Rating\")])], -1 /* HOISTED */));\nconst _hoisted_15 = {\n  key: 1\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"No feedback yet. Be the first one to comment!\", -1 /* HOISTED */));\nconst _hoisted_17 = [_hoisted_16];\nconst _hoisted_18 = {\n  class: \"review-box\"\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Write a Review\", -1 /* HOISTED */));\nconst _hoisted_20 = {\n  class: \"form-group\"\n};\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"feedback\"\n}, \"Add Feedback:\", -1 /* HOISTED */));\nconst _hoisted_22 = {\n  class: \"form-group\"\n};\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Rating:\", -1 /* HOISTED */));\nconst _hoisted_24 = {\n  class: \"rating-buttons\"\n};\nconst _hoisted_25 = [\"onClick\"];\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary mx-auto d-block\",\n  style: {\n    \"text-align\": \"center\",\n    \"margin-top\": \"4%\"\n  }\n}, \"Submit Review\", -1 /* HOISTED */));\nconst _hoisted_27 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_28 = {\n  class: \"similar-books\"\n};\nconst _hoisted_29 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  style: {\n    \"text-align\": \"center\"\n  }\n}, \"Readers also viewed \", -1 /* HOISTED */));\nconst _hoisted_30 = {\n  class: \"similar-books-list\"\n};\nconst _hoisted_31 = [\"onClick\"];\nconst _hoisted_32 = [\"src\"];\nconst _hoisted_33 = {\n  key: 1,\n  src: _imports_0,\n  alt: \"Book Cover\",\n  class: \"img-fluid\"\n};\nconst _hoisted_34 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bi bi-arrow-left\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_35 = [_hoisted_34];\nconst _hoisted_36 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bi bi-arrow-right\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_37 = [_hoisted_36];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavBar = _resolveComponent(\"NavBar\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_NavBar), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: $data.book.coverUrl,\n    alt: \"Book Cover\",\n    class: \"img-fluid\"\n  }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [$data.book.button_text === 'Request' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"btn btn-primary\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.handleButtonClick($data.book))\n  }, _toDisplayString($data.book.button_text), 1 /* TEXT */)) : $data.book.button_text === 'Return' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"btn btn-danger\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.handleButtonClick($data.book))\n  }, _toDisplayString($data.book.button_text), 1 /* TEXT */)) : $data.book.button_text === 'Requested' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    class: \"btn btn-warning\",\n    disabled: \"\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.handleButtonClick($data.book))\n  }, _toDisplayString($data.book.button_text), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", null, [_createElementVNode(\"h2\", null, _toDisplayString($data.book.name), 1 /* TEXT */), _createElementVNode(\"h4\", _hoisted_8, \"by \" + _toDisplayString($data.book.authors), 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.book.rating, star => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: star,\n      style: {\n        \"font-size\": \"smaller\"\n      }\n    }, \"⭐\");\n  }), 128 /* KEYED_FRAGMENT */)), _hoisted_9, _createElementVNode(\"p\", _hoisted_10, _toDisplayString($data.book.content), 1 /* TEXT */), _createElementVNode(\"div\", null, [_hoisted_11, $data.bookFeedback.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"table\", _hoisted_13, [_hoisted_14, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.bookFeedback, feedback => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: feedback.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(feedback.username), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(feedback.feedback), 1 /* TEXT */), _createElementVNode(\"td\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(feedback.rating, i => {\n      return _openBlock(), _createElementBlock(\"span\", {\n        key: i\n      }, \"⭐\");\n    }), 128 /* KEYED_FRAGMENT */))])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [..._hoisted_17])), _createCommentVNode(\" Add Feedback Form \"), _createElementVNode(\"div\", _hoisted_18, [_hoisted_19, _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.submitFeedback && $options.submitFeedback(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_20, [_hoisted_21, _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"feedback\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.newFeedback = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newFeedback]])]), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _createElementVNode(\"div\", _hoisted_24, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, i => {\n    return _createElementVNode(\"button\", {\n      key: i,\n      type: \"button\",\n      class: _normalizeClass([\"btn btn-outline-secondary\", {\n        'btn-warning': i <= $data.newRating\n      }]),\n      onClick: $event => $options.setRating(i)\n    }, _toDisplayString(i), 11 /* TEXT, CLASS, PROPS */, _hoisted_25);\n  }), 64 /* STABLE_FRAGMENT */))])]), _hoisted_26], 32 /* NEED_HYDRATION */)])])])])])])]), _hoisted_27, _createElementVNode(\"div\", _hoisted_28, [_hoisted_29, _createElementVNode(\"div\", _hoisted_30, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.sectionbooks, book => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: book.id,\n      class: \"similar-book\"\n    }, [_createElementVNode(\"button\", {\n      onClick: $event => $options.readBook(book.id),\n      style: {\n        \"border\": \"none\"\n      }\n    }, [book.coverUrl ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: book.coverUrl,\n      alt: \"Book Cover\",\n      class: \"img-fluid\"\n    }, null, 8 /* PROPS */, _hoisted_32)) : (_openBlock(), _createElementBlock(\"img\", _hoisted_33))], 8 /* PROPS */, _hoisted_31), _createElementVNode(\"p\", null, \"by \" + _toDisplayString(book.authors), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"button\", {\n    class: \"scroll-button prev\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.scrollHorizontal(-1))\n  }, [..._hoisted_35]), _createElementVNode(\"button\", {\n    class: \"scroll-button next\",\n    onClick: _cache[6] || (_cache[6] = $event => $options.scrollHorizontal(1))\n  }, [..._hoisted_37])])]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","style","key","_hoisted_16","for","type","src","alt","_hoisted_34","_hoisted_36","_createElementBlock","_createVNode","_component_NavBar","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$data","book","coverUrl","_hoisted_5","_hoisted_6","button_text","onClick","_cache","$event","$options","handleButtonClick","disabled","_createCommentVNode","_hoisted_7","_toDisplayString","name","_hoisted_8","authors","_Fragment","_renderList","rating","star","_hoisted_9","_hoisted_10","content","_hoisted_11","bookFeedback","length","_hoisted_12","_hoisted_13","_hoisted_14","feedback","id","username","i","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","onSubmit","_withModifiers","args","submitFeedback","_hoisted_20","_hoisted_21","newFeedback","_hoisted_22","_hoisted_23","_hoisted_24","_normalizeClass","newRating","setRating","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","sectionbooks","readBook","_hoisted_32","_hoisted_33","_hoisted_31","scrollHorizontal","_hoisted_35","_hoisted_37"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\National-Library-LMS\\Library_Code\\frontend_library\\src\\views\\User\\BookPage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <NavBar />\r\n      <div class=\"product-page\">\r\n        <div class=\"container product-details-container\">\r\n          <div class=\"row justify-content-center\">\r\n            <div class=\"col-md-4 product-image\">\r\n              <img :src=\"book.coverUrl\" alt=\"Book Cover\" class=\"img-fluid\">\r\n              <div class=\"text-center\">\r\n    <button v-if=\"book.button_text === 'Request'\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"handleButtonClick(book)\">\r\n        {{ book.button_text }}\r\n    </button>\r\n    <button v-else-if=\"book.button_text === 'Return'\"\r\n            class=\"btn btn-danger\"\r\n            @click=\"handleButtonClick(book)\">\r\n        {{ book.button_text }}\r\n    </button>\r\n    <button v-else-if=\"book.button_text === 'Requested'\"\r\n            class=\"btn btn-warning\"\r\n            disabled\r\n            @click=\"handleButtonClick(book)\">\r\n        {{ book.button_text }}\r\n    </button>\r\n</div>\r\n            </div>\r\n            <div class=\"col-md-8 product-details\">\r\n              <div>\r\n                <h2>{{ book.name }}</h2>\r\n                <h4 class=\"text-muted\">by {{ book.authors }}</h4>\r\n                <span v-for=\"star in book.rating\" :key=\"star\" style=\"font-size: smaller;\">⭐</span>\r\n                <hr style=\"margin-top: 0%;\">\r\n                <p class=\"text-justify\" style=\"margin-top: 1%;\">{{ book.content }}</p>\r\n                <div>\r\n                  <h4 class=\"mt-4\">Reviews:</h4>\r\n                  <div v-if=\"bookFeedback.length > 0\">\r\n                    <table class=\"table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>User Name</th>\r\n                          <th>Feedback</th>\r\n                          <th>Rating</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr v-for=\"feedback in bookFeedback\" :key=\"feedback.id\">\r\n                          <td>{{ feedback.username }}</td>\r\n                          <td>{{ feedback.feedback }}</td>\r\n                          <td>\r\n                            <span v-for=\"i in feedback.rating\" :key=\"i\">⭐</span>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                  <div v-else>\r\n                    <p>No feedback yet. Be the first one to comment!</p>\r\n                  </div>\r\n                  <!-- Add Feedback Form -->\r\n                  <div class=\"review-box\">\r\n                    <h4>Write a Review</h4>\r\n                    <form @submit.prevent=\"submitFeedback\">\r\n                      <div class=\"form-group\">\r\n                        <label for=\"feedback\">Add Feedback:</label>\r\n                        <textarea id=\"feedback\" class=\"form-control\" v-model=\"newFeedback\"></textarea>\r\n                      </div>\r\n                      <div class=\"form-group\">\r\n                        <label>Rating:</label>\r\n                        <div class=\"rating-buttons\">\r\n                          <button\r\n                            v-for=\"i in 5\"\r\n                            :key=\"i\"\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                            :class=\"{ 'btn-warning': i <= newRating }\"\r\n                            @click=\"setRating(i)\"\r\n                          >\r\n                            {{ i }}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary mx-auto d-block\" style=\"text-align: center;margin-top: 4%;\">Submit Review</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr>\r\n      <div class=\"similar-books\">\r\n        <h2 style=\"text-align: center;\">Readers also viewed </h2>\r\n        <div class=\"similar-books-list\">\r\n          <div v-for=\"book in sectionbooks\" :key=\"book.id\" class=\"similar-book\">\r\n            <button @click=\"readBook(book.id)\" style=\"border: none;\">\r\n            <template v-if=\"book.coverUrl\">\r\n            <img :src=\"book.coverUrl\" alt=\"Book Cover\" class=\"img-fluid\">\r\n            </template>\r\n            <template v-else>\r\n              <img src=\"@/assets/default.jpeg\" alt=\"Book Cover\" class=\"img-fluid\">\r\n            </template>\r\n          </button>\r\n            <p>by {{ book.authors }}</p>\r\n           \r\n          </div>\r\n        </div>\r\n        <button class=\"scroll-button prev\" @click=\"scrollHorizontal(-1)\">\r\n          <i class=\"bi bi-arrow-left\"></i>\r\n        </button>\r\n        <button class=\"scroll-button next\" @click=\"scrollHorizontal(1)\">\r\n          <i class=\"bi bi-arrow-right\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  \r\n\r\n  <script>\r\n  import NavBar from \"../../components/NavBar.vue\";\r\n  import axios from \"axios\";\r\n\r\n  \r\n  export default {\r\n    name: \"ProductPage\",\r\n    components: {\r\n      NavBar\r\n    },\r\n    data() {\r\n      return {\r\n        book: {},\r\n        bookFeedback: [],\r\n        similarBooks: [],\r\n        newFeedback: \"\",\r\n        newRating: null,\r\n        sectionbooks:[]\r\n      };\r\n    },\r\n    computed: {\r\n      buttonColor() {\r\n        if (this.book.is_allocated) {\r\n          return \"blue-button\";\r\n        } else if (this.book.is_requested) {\r\n          return \"blue-button\";\r\n        } else {\r\n          return \"yellow-button\";\r\n        }\r\n      },\r\n      isButtonDisabled() {\r\n        return this.book.is_allocated || this.book.is_requested;\r\n      }\r\n    },\r\n    methods: {\r\n      readBook(book_id) {\r\n      this.$router.push({ name: 'BookPage', params: { id: book_id} });\r\n\r\n    },\r\n      async fetchBookDetails() {\r\n        try {\r\n          const bookId = this.$route.params.id;\r\n          const response = await axios.get(`http://127.0.0.1:5000/api/books/${bookId}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          });\r\n          this.book = response.data;\r\n          await this.fetchBookCovers(this.book);\r\n          await this.fetchsectionBooks(this.book.section_id);\r\n          await this.fetchBookFeedback(this.book.id);\r\n        } catch (error) {\r\n          console.error(\"Error fetching book details:\", error);\r\n        }\r\n      },\r\n      async fetchBookCovers(books) {\r\n        try {\r\n          console.log(books);\r\n          const coverUrl = await this.getBookCover(books);\r\n          books.coverUrl = coverUrl;\r\n          return books.coverurl;\r\n        } catch (error) {\r\n          console.error(\"Error fetching book cover:\", error);\r\n          books.coverUrl = null;\r\n        }\r\n  \r\n      },\r\n      async multiplecover(books) {\r\n        for (const book of books) {\r\n          try {\r\n            const coverUrl = await this.getBookCover(book);\r\n            book.coverUrl = coverUrl;\r\n          } catch (error) {\r\n            console.error(\"Error fetching book cover:\", error);\r\n            book.coverUrl = null;\r\n          }\r\n        }\r\n      },\r\n  \r\n      getBookCover(book) {\r\n        const apiUrl = `http://localhost:5000/bookcover?book_title=${encodeURIComponent(book.name)}\r\n            &author_name=${encodeURIComponent(book.authors)}\r\n            &isbn=${encodeURIComponent(book.isbn)}`;\r\n  \r\n        return axios\r\n          .get(apiUrl)\r\n          .then((response) => {\r\n            return response.data;\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching book cover:\", error);\r\n            return null;\r\n          });\r\n      },\r\n  \r\n      async fetchBookFeedback(book_id) {\r\n        try {\r\n          const bookId = book_id;\r\n          const response = await axios.get(`http://127.0.0.1:5000/api/books/${bookId}/feedback`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          });\r\n          this.bookFeedback = response.data;\r\n          \r\n        } catch (error) {\r\n          console.error(\"Error fetching book feedback:\", error);\r\n        }\r\n      },\r\n  \r\n      downloadBook() {\r\n        // Implement book download logic\r\n      },\r\n      async submitFeedback() {\r\n        try {\r\n          const response = await axios.post(\r\n            \"http://127.0.0.1:5000/api/submit_feedback\",\r\n            {\r\n              rating: this.newRating,\r\n              feedback: this.newFeedback,\r\n              user_id: this.book.user_id, \r\n              book_id: this.book.id \r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n              },\r\n            }\r\n          );\r\n          if (response.status === 200) {\r\n            console.log(\"Feedback submitted successfully\");\r\n            this.newRating = null;\r\n            this.newFeedback = \"\";\r\n            alert(\"Feedback submitted successfully\");\r\n            location.reload(); // Refresh the page\r\n          } else {\r\n            console.error(\"Failed to submit feedback\");\r\n          }\r\n        } catch (error) {\r\n          alert(error.response.data.error);\r\n          console.error(\"Error submitting feedback:\", error);\r\n        }\r\n      },\r\n      async fetchsectionBooks(id) {\r\n        try {\r\n          const section_id = id;\r\n          const response = await axios.get(`http://127.0.0.1:5000/api/sections/${section_id}/books`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          });\r\n          this.sectionbooks = response.data;\r\n          await this.multiplecover(this.sectionbooks);\r\n        } catch (error) {\r\n          console.error(\"Error fetching book feedback:\", error);\r\n        }\r\n      },\r\n      scrollHorizontal(direction) {\r\n        const scrollContainer = document.querySelector(\".similar-books-list\");\r\n        const scrollAmount = 300 * direction;\r\n        scrollContainer.scrollBy({\r\n          left: scrollAmount,\r\n          behavior: \"smooth\"\r\n        });\r\n      },\r\n  \r\n      setRating(rating) {\r\n        this.newRating = rating;\r\n      },\r\n  \r\n    async  handleButtonClick() {\r\n        // Handle button click based on conditions\r\n        if (this.book.is_allocated) {\r\n          try {\r\n        const response = await axios.post(\r\n          \"http://127.0.0.1:5000/api/return/book\",\r\n          {\r\n            book_id: this.book.id,\r\n            user_id: this.book.user_id\r\n          },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\r\n            }\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          alert(\"Book has been returned\");\r\n          console.log(\"Book returned successfully\");\r\n          this.fetchBookDetails();\r\n        } else {\r\n          console.error(\"Failed to return the book\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error returning the book:\", error);\r\n      }\r\n        }else {\r\n      \r\n      const requestData = {\r\n        book_id: this.book.id,\r\n      };\r\n      await axios\r\n        .post(\"http://127.0.0.1:5000/api/request/book\", requestData, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n          },\r\n        })\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          console.log(\"Request sent\");\r\n          this.fetchBookDetails();\r\n        })\r\n        .catch((error) => {\r\n          alert(error.response.data.error);\r\n          console.log(error);\r\n        });\r\n    }\r\n        },\r\n     \r\n  \r\n      getButtonLabel() {\r\n        if (this.book.is_allocated) {\r\n          return \"Return\";\r\n        } else if (this.book.is_requested) {\r\n          return \"Requested\";\r\n        } else {\r\n          return \"Request\";\r\n        }\r\n      },\r\n    },\r\n  //   beforeRouteUpdate(to, from, next) {\r\n  //   // Call fetchBookDetails when route parameters change\r\n  //   this.fetchBookDetails();\r\n  //   next();\r\n  // },\r\n  mounted() {\r\n    // Fetch initial book details when the component is mounted\r\n    this.fetchBookDetails();\r\n  },\r\n  watch: {\r\n    // Watch for changes in route parameters\r\n    '$route'() {\r\n      // Call fetchBookDetails when the route changes\r\n      this.fetchBookDetails();\r\n    }\r\n  }\r\n};\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .product-page {\r\n      padding: 20px;\r\n      margin-bottom: 2%;\r\n  }\r\n  \r\n  .product-details-container {\r\n      background-color: #fff;\r\n      padding: 20px;\r\n      border-radius: 10px;\r\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .product-image img {\r\n      width: 100%;\r\n      height: auto;\r\n  }\r\n  \r\n  .download-button {\r\n      background-color: #007bff;\r\n      color: #fff;\r\n      border: none;\r\n      padding: 10px 20px;\r\n      cursor: pointer;\r\n  }\r\n  \r\n  .blue-button {\r\n      background-color: #007bff;\r\n      color: #fff;\r\n  }\r\n  \r\n  .yellow-button {\r\n      background-color: #ffc107;\r\n      color: #000;\r\n  }\r\n  \r\n  .blue-button:disabled,\r\n  .yellow-button:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n  }\r\n  \r\n  .similar-books {\r\n      position: relative;\r\n      margin-top: 3%;\r\n  }\r\n  \r\n  .similar-books p {\r\n      text-align: center;\r\n  }\r\n  \r\n  .similar-books-list {\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      overflow-x: auto;\r\n      padding-bottom: 20px;\r\n      scrollbar-width: none;\r\n      -ms-overflow-style: none;\r\n  }\r\n  \r\n  .similar-books-list::-webkit-scrollbar {\r\n      display: none;\r\n  }\r\n  \r\n  .similar-book {\r\n      max-width: 13.333%;\r\n      padding: .75rem;\r\n      margin-bottom: 2rem;\r\n      border: 0;\r\n      flex-basis: 33.333%;\r\n      flex-grow: 0;\r\n      flex-shrink: 0;\r\n  }\r\n  \r\n  .similar-book img {\r\n      width: 100%;\r\n      height: 80%;\r\n  }\r\n  \r\n  .scroll-button {\r\n      position: absolute;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n      background: transparent;\r\n      border: none;\r\n      cursor: pointer;\r\n      padding: 5px;\r\n      font-size: 1.5em;\r\n      color: white;\r\n      background-color: #007bff;\r\n  }\r\n  \r\n  .scroll-button.prev {\r\n      left: 2;\r\n  }\r\n  \r\n  .scroll-button.next {\r\n      right: 0;\r\n  }\r\n  \r\n  .star {\r\n      font-size: 24px;\r\n      color: #FFD700;\r\n      cursor: pointer;\r\n  }\r\n  \r\n  .review-box {\r\n      position: relative;\r\n      border: 1px solid #ccc;\r\n      border-radius: 5px;\r\n      padding: 20px;\r\n      width: 300px;\r\n      margin-top: 100px;\r\n  }\r\n  \r\n  .rating-buttons {\r\n      display: flex;\r\n      justify-content: center;\r\n      margin-top: 10px;\r\n      color: black;\r\n      margin-top: 1%;\r\n  }\r\n  \r\n  .rating-buttons :hover {\r\n      background-color: #FFD700;\r\n      color: black;\r\n  }\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}