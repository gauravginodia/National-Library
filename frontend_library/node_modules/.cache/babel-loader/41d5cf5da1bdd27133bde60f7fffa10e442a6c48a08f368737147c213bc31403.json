{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavBar from \"../../components/NavBar.vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"ProductPage\",\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      book: {},\n      bookFeedback: [],\n      similarBooks: [],\n      newFeedback: \"\",\n      newRating: null,\n      sectionbooks: []\n    };\n  },\n  computed: {\n    buttonColor() {\n      if (this.book.is_allocated) {\n        return \"blue-button\";\n      } else if (this.book.is_requested) {\n        return \"blue-button\";\n      } else {\n        return \"yellow-button\";\n      }\n    },\n    isButtonDisabled() {\n      return this.book.is_allocated || this.book.is_requested;\n    }\n  },\n  methods: {\n    readBook(book_id) {\n      this.$router.push({\n        name: 'BookPage',\n        params: {\n          id: book_id\n        }\n      });\n    },\n    async fetchBookDetails() {\n      try {\n        const bookId = this.$route.params.id;\n        const response = await axios.get(`http://127.0.0.1:5000/api/books/${bookId}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        this.book = response.data;\n        await this.fetchBookCovers(this.book);\n        await this.fetchsectionBooks(this.book.section_id);\n        await this.fetchBookFeedback(this.book.id);\n      } catch (error) {\n        console.error(\"Error fetching book details:\", error);\n      }\n    },\n    async fetchBookCovers(books) {\n      try {\n        console.log(books);\n        const coverUrl = await this.getBookCover(books);\n        books.coverUrl = coverUrl;\n        return books.coverurl;\n      } catch (error) {\n        console.error(\"Error fetching book cover:\", error);\n        books.coverUrl = null;\n      }\n    },\n    async multiplecover(books) {\n      for (const book of books) {\n        try {\n          const coverUrl = await this.getBookCover(book);\n          book.coverUrl = coverUrl;\n        } catch (error) {\n          console.error(\"Error fetching book cover:\", error);\n          book.coverUrl = null;\n        }\n      }\n    },\n    getBookCover(book) {\n      const apiUrl = `http://localhost:5000/bookcover?book_title=${encodeURIComponent(book.name)}\n            &author_name=${encodeURIComponent(book.authors)}\n            &isbn=${encodeURIComponent(book.isbn)}`;\n      return axios.get(apiUrl).then(response => {\n        return response.data;\n      }).catch(error => {\n        console.error(\"Error fetching book cover:\", error);\n        return null;\n      });\n    },\n    async fetchBookFeedback(book_id) {\n      try {\n        const bookId = book_id;\n        const response = await axios.get(`http://127.0.0.1:5000/api/books/${bookId}/feedback`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        this.bookFeedback = response.data;\n      } catch (error) {\n        console.error(\"Error fetching book feedback:\", error);\n      }\n    },\n    downloadBook() {\n      // Implement book download logic\n    },\n    async submitFeedback() {\n      try {\n        const response = await axios.post(\"http://127.0.0.1:5000/api/submit_feedback\", {\n          rating: this.newRating,\n          feedback: this.newFeedback,\n          user_id: this.book.user_id,\n          book_id: this.book.id\n        }, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        if (response.status === 200) {\n          console.log(\"Feedback submitted successfully\");\n          this.newRating = null;\n          this.newFeedback = \"\";\n          alert(\"Feedback submitted successfully\");\n          location.reload(); // Refresh the page\n        } else {\n          console.error(\"Failed to submit feedback\");\n        }\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Error submitting feedback:\", error);\n      }\n    },\n    async fetchsectionBooks(id) {\n      try {\n        const section_id = id;\n        const response = await axios.get(`http://127.0.0.1:5000/api/sections/${section_id}/books`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        this.sectionbooks = response.data;\n        await this.multiplecover(this.sectionbooks);\n      } catch (error) {\n        console.error(\"Error fetching book feedback:\", error);\n      }\n    },\n    scrollHorizontal(direction) {\n      const scrollContainer = document.querySelector(\".similar-books-list\");\n      const scrollAmount = 300 * direction;\n      scrollContainer.scrollBy({\n        left: scrollAmount,\n        behavior: \"smooth\"\n      });\n    },\n    setRating(rating) {\n      this.newRating = rating;\n    },\n    async handleButtonClick() {\n      // Handle button click based on conditions\n      if (this.book.is_allocated) {\n        try {\n          const response = await axios.post(\"http://127.0.0.1:5000/api/return/book\", {\n            book_id: this.book.id,\n            user_id: this.book.user_id\n          }, {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n            }\n          });\n          if (response.status === 200) {\n            alert(\"Book has been returned\");\n            console.log(\"Book returned successfully\");\n            this.fetchBookDetails();\n          } else {\n            console.error(\"Failed to return the book\");\n          }\n        } catch (error) {\n          console.error(\"Error returning the book:\", error);\n        }\n      } else {\n        const requestData = {\n          book_id: this.book.id\n        };\n        await axios.post(\"http://127.0.0.1:5000/api/request/book\", requestData, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        }).then(response => {\n          console.log(response.data);\n          console.log(\"Request sent\");\n          this.fetchBookDetails();\n        }).catch(error => {\n          alert(error.response.data.error);\n          console.log(error);\n        });\n      }\n    },\n    getButtonLabel() {\n      if (this.book.is_allocated) {\n        return \"Return\";\n      } else if (this.book.is_requested) {\n        return \"Requested\";\n      } else {\n        return \"Request\";\n      }\n    }\n  },\n  //   beforeRouteUpdate(to, from, next) {\n  //   // Call fetchBookDetails when route parameters change\n  //   this.fetchBookDetails();\n  //   next();\n  // },\n  mounted() {\n    // Fetch initial book details when the component is mounted\n    this.fetchBookDetails();\n  },\n  watch: {\n    // Watch for changes in route parameters\n    '$route'() {\n      // Call fetchBookDetails when the route changes\n      this.fetchBookDetails();\n    }\n  }\n};","map":{"version":3,"names":["NavBar","axios","name","components","data","book","bookFeedback","similarBooks","newFeedback","newRating","sectionbooks","computed","buttonColor","is_allocated","is_requested","isButtonDisabled","methods","readBook","book_id","$router","push","params","id","fetchBookDetails","bookId","$route","response","get","headers","Authorization","localStorage","getItem","fetchBookCovers","fetchsectionBooks","section_id","fetchBookFeedback","error","console","books","log","coverUrl","getBookCover","coverurl","multiplecover","apiUrl","encodeURIComponent","authors","isbn","then","catch","downloadBook","submitFeedback","post","rating","feedback","user_id","status","alert","location","reload","scrollHorizontal","direction","scrollContainer","document","querySelector","scrollAmount","scrollBy","left","behavior","setRating","handleButtonClick","requestData","getButtonLabel","mounted","watch"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\National-Library-LMS\\Library_Code\\frontend_library\\src\\views\\User\\BookPage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <NavBar />\r\n      <div class=\"product-page\">\r\n        <div class=\"container product-details-container\">\r\n          <div class=\"row justify-content-center\">\r\n            <div class=\"col-md-4 product-image\">\r\n              <img :src=\"book.coverUrl\" alt=\"Book Cover\" class=\"img-fluid\">\r\n              <div class=\"text-center\">\r\n    <button v-if=\"book.button_text === 'Request'\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"handleButtonClick(book)\">\r\n        {{ book.button_text }}\r\n    </button>\r\n    <button v-else-if=\"book.button_text === 'Return'\"\r\n            class=\"btn btn-danger\"\r\n            @click=\"handleButtonClick(book)\">\r\n        {{ book.button_text }}\r\n    </button>\r\n    <button v-else-if=\"book.button_text === 'Requested'\"\r\n            class=\"btn btn-warning\"\r\n            disabled\r\n            @click=\"handleButtonClick(book)\">\r\n        {{ book.button_text }}\r\n    </button>\r\n</div>\r\n            </div>\r\n            <div class=\"col-md-8 product-details\">\r\n              <div>\r\n                <h2>{{ book.name }}</h2>\r\n                <h4 class=\"text-muted\">by {{ book.authors }}</h4>\r\n                <span v-for=\"star in book.rating\" :key=\"star\" style=\"font-size: smaller;\">‚≠ê</span>\r\n                <hr style=\"margin-top: 0%;\">\r\n                <p class=\"text-justify\" style=\"margin-top: 1%;\">{{ book.content }}</p>\r\n                <div>\r\n                  <h4 class=\"mt-4\">Reviews:</h4>\r\n                  <div v-if=\"bookFeedback.length > 0\">\r\n                    <table class=\"table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>User Name</th>\r\n                          <th>Feedback</th>\r\n                          <th>Rating</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr v-for=\"feedback in bookFeedback\" :key=\"feedback.id\">\r\n                          <td>{{ feedback.username }}</td>\r\n                          <td>{{ feedback.feedback }}</td>\r\n                          <td>\r\n                            <span v-for=\"i in feedback.rating\" :key=\"i\">‚≠ê</span>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                  <div v-else>\r\n                    <p>No feedback yet. Be the first one to comment!</p>\r\n                  </div>\r\n                  <!-- Add Feedback Form -->\r\n                  <div class=\"review-box\">\r\n                    <h4>Write a Review</h4>\r\n                    <form @submit.prevent=\"submitFeedback\">\r\n                      <div class=\"form-group\">\r\n                        <label for=\"feedback\">Add Feedback:</label>\r\n                        <textarea id=\"feedback\" class=\"form-control\" v-model=\"newFeedback\"></textarea>\r\n                      </div>\r\n                      <div class=\"form-group\">\r\n                        <label>Rating:</label>\r\n                        <div class=\"rating-buttons\">\r\n                          <button\r\n                            v-for=\"i in 5\"\r\n                            :key=\"i\"\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                            :class=\"{ 'btn-warning': i <= newRating }\"\r\n                            @click=\"setRating(i)\"\r\n                          >\r\n                            {{ i }}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary mx-auto d-block\" style=\"text-align: center;margin-top: 4%;\">Submit Review</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr>\r\n      <div class=\"similar-books\">\r\n        <h2 style=\"text-align: center;\">Readers also viewed </h2>\r\n        <div class=\"similar-books-list\">\r\n          <div v-for=\"book in sectionbooks\" :key=\"book.id\" class=\"similar-book\">\r\n            <button @click=\"readBook(book.id)\" style=\"border: none;\">\r\n            <template v-if=\"book.coverUrl\">\r\n            <img :src=\"book.coverUrl\" alt=\"Book Cover\" class=\"img-fluid\">\r\n            </template>\r\n            <template v-else>\r\n              <img src=\"@/assets/default.jpeg\" alt=\"Book Cover\" class=\"img-fluid\">\r\n            </template>\r\n          </button>\r\n            <p>by {{ book.authors }}</p>\r\n           \r\n          </div>\r\n        </div>\r\n        <button class=\"scroll-button prev\" @click=\"scrollHorizontal(-1)\">\r\n          <i class=\"bi bi-arrow-left\"></i>\r\n        </button>\r\n        <button class=\"scroll-button next\" @click=\"scrollHorizontal(1)\">\r\n          <i class=\"bi bi-arrow-right\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  \r\n\r\n  <script>\r\n  import NavBar from \"../../components/NavBar.vue\";\r\n  import axios from \"axios\";\r\n\r\n  \r\n  export default {\r\n    name: \"ProductPage\",\r\n    components: {\r\n      NavBar\r\n    },\r\n    data() {\r\n      return {\r\n        book: {},\r\n        bookFeedback: [],\r\n        similarBooks: [],\r\n        newFeedback: \"\",\r\n        newRating: null,\r\n        sectionbooks:[]\r\n      };\r\n    },\r\n    computed: {\r\n      buttonColor() {\r\n        if (this.book.is_allocated) {\r\n          return \"blue-button\";\r\n        } else if (this.book.is_requested) {\r\n          return \"blue-button\";\r\n        } else {\r\n          return \"yellow-button\";\r\n        }\r\n      },\r\n      isButtonDisabled() {\r\n        return this.book.is_allocated || this.book.is_requested;\r\n      }\r\n    },\r\n    methods: {\r\n      readBook(book_id) {\r\n      this.$router.push({ name: 'BookPage', params: { id: book_id} });\r\n\r\n    },\r\n      async fetchBookDetails() {\r\n        try {\r\n          const bookId = this.$route.params.id;\r\n          const response = await axios.get(`http://127.0.0.1:5000/api/books/${bookId}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          });\r\n          this.book = response.data;\r\n          await this.fetchBookCovers(this.book);\r\n          await this.fetchsectionBooks(this.book.section_id);\r\n          await this.fetchBookFeedback(this.book.id);\r\n        } catch (error) {\r\n          console.error(\"Error fetching book details:\", error);\r\n        }\r\n      },\r\n      async fetchBookCovers(books) {\r\n        try {\r\n          console.log(books);\r\n          const coverUrl = await this.getBookCover(books);\r\n          books.coverUrl = coverUrl;\r\n          return books.coverurl;\r\n        } catch (error) {\r\n          console.error(\"Error fetching book cover:\", error);\r\n          books.coverUrl = null;\r\n        }\r\n  \r\n      },\r\n      async multiplecover(books) {\r\n        for (const book of books) {\r\n          try {\r\n            const coverUrl = await this.getBookCover(book);\r\n            book.coverUrl = coverUrl;\r\n          } catch (error) {\r\n            console.error(\"Error fetching book cover:\", error);\r\n            book.coverUrl = null;\r\n          }\r\n        }\r\n      },\r\n  \r\n      getBookCover(book) {\r\n        const apiUrl = `http://localhost:5000/bookcover?book_title=${encodeURIComponent(book.name)}\r\n            &author_name=${encodeURIComponent(book.authors)}\r\n            &isbn=${encodeURIComponent(book.isbn)}`;\r\n  \r\n        return axios\r\n          .get(apiUrl)\r\n          .then((response) => {\r\n            return response.data;\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching book cover:\", error);\r\n            return null;\r\n          });\r\n      },\r\n  \r\n      async fetchBookFeedback(book_id) {\r\n        try {\r\n          const bookId = book_id;\r\n          const response = await axios.get(`http://127.0.0.1:5000/api/books/${bookId}/feedback`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          });\r\n          this.bookFeedback = response.data;\r\n          \r\n        } catch (error) {\r\n          console.error(\"Error fetching book feedback:\", error);\r\n        }\r\n      },\r\n  \r\n      downloadBook() {\r\n        // Implement book download logic\r\n      },\r\n      async submitFeedback() {\r\n        try {\r\n          const response = await axios.post(\r\n            \"http://127.0.0.1:5000/api/submit_feedback\",\r\n            {\r\n              rating: this.newRating,\r\n              feedback: this.newFeedback,\r\n              user_id: this.book.user_id, \r\n              book_id: this.book.id \r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n              },\r\n            }\r\n          );\r\n          if (response.status === 200) {\r\n            console.log(\"Feedback submitted successfully\");\r\n            this.newRating = null;\r\n            this.newFeedback = \"\";\r\n            alert(\"Feedback submitted successfully\");\r\n            location.reload(); // Refresh the page\r\n          } else {\r\n            console.error(\"Failed to submit feedback\");\r\n          }\r\n        } catch (error) {\r\n          alert(error.response.data.error);\r\n          console.error(\"Error submitting feedback:\", error);\r\n        }\r\n      },\r\n      async fetchsectionBooks(id) {\r\n        try {\r\n          const section_id = id;\r\n          const response = await axios.get(`http://127.0.0.1:5000/api/sections/${section_id}/books`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          });\r\n          this.sectionbooks = response.data;\r\n          await this.multiplecover(this.sectionbooks);\r\n        } catch (error) {\r\n          console.error(\"Error fetching book feedback:\", error);\r\n        }\r\n      },\r\n      scrollHorizontal(direction) {\r\n        const scrollContainer = document.querySelector(\".similar-books-list\");\r\n        const scrollAmount = 300 * direction;\r\n        scrollContainer.scrollBy({\r\n          left: scrollAmount,\r\n          behavior: \"smooth\"\r\n        });\r\n      },\r\n  \r\n      setRating(rating) {\r\n        this.newRating = rating;\r\n      },\r\n  \r\n    async  handleButtonClick() {\r\n        // Handle button click based on conditions\r\n        if (this.book.is_allocated) {\r\n          try {\r\n        const response = await axios.post(\r\n          \"http://127.0.0.1:5000/api/return/book\",\r\n          {\r\n            book_id: this.book.id,\r\n            user_id: this.book.user_id\r\n          },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\r\n            }\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          alert(\"Book has been returned\");\r\n          console.log(\"Book returned successfully\");\r\n          this.fetchBookDetails();\r\n        } else {\r\n          console.error(\"Failed to return the book\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error returning the book:\", error);\r\n      }\r\n        }else {\r\n      \r\n      const requestData = {\r\n        book_id: this.book.id,\r\n      };\r\n      await axios\r\n        .post(\"http://127.0.0.1:5000/api/request/book\", requestData, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n          },\r\n        })\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          console.log(\"Request sent\");\r\n          this.fetchBookDetails();\r\n        })\r\n        .catch((error) => {\r\n          alert(error.response.data.error);\r\n          console.log(error);\r\n        });\r\n    }\r\n        },\r\n     \r\n  \r\n      getButtonLabel() {\r\n        if (this.book.is_allocated) {\r\n          return \"Return\";\r\n        } else if (this.book.is_requested) {\r\n          return \"Requested\";\r\n        } else {\r\n          return \"Request\";\r\n        }\r\n      },\r\n    },\r\n  //   beforeRouteUpdate(to, from, next) {\r\n  //   // Call fetchBookDetails when route parameters change\r\n  //   this.fetchBookDetails();\r\n  //   next();\r\n  // },\r\n  mounted() {\r\n    // Fetch initial book details when the component is mounted\r\n    this.fetchBookDetails();\r\n  },\r\n  watch: {\r\n    // Watch for changes in route parameters\r\n    '$route'() {\r\n      // Call fetchBookDetails when the route changes\r\n      this.fetchBookDetails();\r\n    }\r\n  }\r\n};\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .product-page {\r\n      padding: 20px;\r\n      margin-bottom: 2%;\r\n  }\r\n  \r\n  .product-details-container {\r\n      background-color: #fff;\r\n      padding: 20px;\r\n      border-radius: 10px;\r\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .product-image img {\r\n      width: 100%;\r\n      height: auto;\r\n  }\r\n  \r\n  .download-button {\r\n      background-color: #007bff;\r\n      color: #fff;\r\n      border: none;\r\n      padding: 10px 20px;\r\n      cursor: pointer;\r\n  }\r\n  \r\n  .blue-button {\r\n      background-color: #007bff;\r\n      color: #fff;\r\n  }\r\n  \r\n  .yellow-button {\r\n      background-color: #ffc107;\r\n      color: #000;\r\n  }\r\n  \r\n  .blue-button:disabled,\r\n  .yellow-button:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n  }\r\n  \r\n  .similar-books {\r\n      position: relative;\r\n      margin-top: 3%;\r\n  }\r\n  \r\n  .similar-books p {\r\n      text-align: center;\r\n  }\r\n  \r\n  .similar-books-list {\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      overflow-x: auto;\r\n      padding-bottom: 20px;\r\n      scrollbar-width: none;\r\n      -ms-overflow-style: none;\r\n  }\r\n  \r\n  .similar-books-list::-webkit-scrollbar {\r\n      display: none;\r\n  }\r\n  \r\n  .similar-book {\r\n      max-width: 13.333%;\r\n      padding: .75rem;\r\n      margin-bottom: 2rem;\r\n      border: 0;\r\n      flex-basis: 33.333%;\r\n      flex-grow: 0;\r\n      flex-shrink: 0;\r\n  }\r\n  \r\n  .similar-book img {\r\n      width: 100%;\r\n      height: 80%;\r\n  }\r\n  \r\n  .scroll-button {\r\n      position: absolute;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n      background: transparent;\r\n      border: none;\r\n      cursor: pointer;\r\n      padding: 5px;\r\n      font-size: 1.5em;\r\n      color: white;\r\n      background-color: #007bff;\r\n  }\r\n  \r\n  .scroll-button.prev {\r\n      left: 2;\r\n  }\r\n  \r\n  .scroll-button.next {\r\n      right: 0;\r\n  }\r\n  \r\n  .star {\r\n      font-size: 24px;\r\n      color: #FFD700;\r\n      cursor: pointer;\r\n  }\r\n  \r\n  .review-box {\r\n      position: relative;\r\n      border: 1px solid #ccc;\r\n      border-radius: 5px;\r\n      padding: 20px;\r\n      width: 300px;\r\n      margin-top: 100px;\r\n  }\r\n  \r\n  .rating-buttons {\r\n      display: flex;\r\n      justify-content: center;\r\n      margin-top: 10px;\r\n      color: black;\r\n      margin-top: 1%;\r\n  }\r\n  \r\n  .rating-buttons :hover {\r\n      background-color: #FFD700;\r\n      color: black;\r\n  }\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}