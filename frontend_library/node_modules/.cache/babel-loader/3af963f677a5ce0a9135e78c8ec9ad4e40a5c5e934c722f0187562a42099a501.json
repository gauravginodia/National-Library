{"ast":null,"code":"import axios from \"axios\";\nimport NavBar from \"@/components/NavBar.vue\";\nexport default {\n  name: \"UserHistory\",\n  data() {\n    return {\n      listreturned: [],\n      rating: null,\n      comments: \"\",\n      searchBar: \"\"\n    };\n  },\n  components: {\n    NavBar\n  },\n  computed: {\n    filteredReturnedBooks() {\n      return this.listreturned.filter(book => book.book_title.toLowerCase().includes(this.searchBar.toLowerCase()) || book.author.toLowerCase().includes(this.searchBar.toLowerCase()) || book.section.toLowerCase().includes(this.searchBar.toLowerCase()));\n    }\n  },\n  methods: {\n    async fetchlistreturned() {\n      try {\n        const response = await axios.get(\"http://127.0.0.1:5000/api/fetch_returned_books\", {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        if (response.status === 200) {\n          this.listreturned = response.data;\n        } else {\n          console.error(\"Failed to fetch returned books\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching returned books:\", error);\n      }\n    }\n  },\n  mounted() {\n    this.fetchlistreturned();\n  }\n};","map":{"version":3,"names":["axios","NavBar","name","data","listreturned","rating","comments","searchBar","components","computed","filteredReturnedBooks","filter","book","book_title","toLowerCase","includes","author","section","methods","fetchlistreturned","response","get","headers","Authorization","localStorage","getItem","status","console","error","mounted"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\National-Library-LMS\\Library_Code\\frontend_library\\src\\views\\User\\UserHistory.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <NavBar/>\r\n\r\n    <h2 style=\"text-align: center;margin-top:2.5%\">You have returned these books:</h2>\r\n    <input style=\"width:100%;padding: 0.5%;border-width:0.5cap;border-radius: 10cqb; color:black;font-weight: 700;font-size:large;text-align: center;border-color: black;margin-bottom:2%\" type=\"text\" v-model=\"searchBar\" placeholder=\"Search by book or author or section\">\r\n\r\n            <div v-if=\"listreturned.length > 0\">\r\n              <table class=\"table center-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Book Name</th>\r\n                    <th>Author</th>\r\n                    <th>Section</th>\r\n                    <th>Feedback Given</th>\r\n                    <th>Rating Given</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"book in filteredReturnedBooks\" :key=\"book.book_id\">\r\n                    <td>{{ book.book_title }}</td>\r\n                    <td>{{ book.author }}</td>\r\n                    <td>{{ book.section }}</td>\r\n                    <td>{{ book.feedback }}</td>\r\n                    <td><span v-for=\"i in book.rating\" :key=\"i\">‚≠ê</span></td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n    \r\n            </div>\r\n            <div v-else>\r\n              <p>Not found</p>\r\n            </div>\r\n          </div>\r\n  \r\n  <FootBar/>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport NavBar from \"@/components/NavBar.vue\";\r\n\r\nexport default {\r\n  name: \"UserHistory\",\r\n  data() {\r\n    return {\r\n      listreturned: [],\r\n      rating: null,\r\n      comments: \"\",\r\n      searchBar: \"\",\r\n    };\r\n  },\r\n  components:{\r\n    NavBar,\r\n  },\r\n  computed: {\r\n    filteredReturnedBooks() {\r\n      return this.listreturned.filter(book =>\r\n        book.book_title.toLowerCase().includes(this.searchBar.toLowerCase()) ||\r\n        book.author.toLowerCase().includes(this.searchBar.toLowerCase()) ||\r\n        book.section.toLowerCase().includes(this.searchBar.toLowerCase())\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchlistreturned() {\r\n      try {\r\n        const response = await axios.get(\r\n          \"http://127.0.0.1:5000/api/fetch_returned_books\",\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          this.listreturned = response.data;\r\n        } else {\r\n          console.error(\"Failed to fetch returned books\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching returned books:\", error);\r\n      }\r\n    },\r\n    \r\n  },\r\n  mounted() {\r\n    this.fetchlistreturned();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn {\r\n\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  padding: 5%;\r\n  margin: 2%;\r\n}\r\n\r\n\r\n*,\r\n*:before,\r\n*:after {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n\r\ntable {\r\n  width: 90%;\r\n  background: #333;\r\n  border-radius: 0.25em;\r\n  border-collapse: collapse;\r\n  margin-left:5%;\r\n  margin-top: 2%;\r\n}\r\n\r\nth {\r\n  border-bottom: 1px solid #364043;\r\n  color: #E2B842;\r\n  font-size:large;\r\n  font-weight: 600;\r\n  padding: 0.3em 1em;\r\n  text-align: center;\r\n}\r\n\r\ntd {\r\n  color: #fff;\r\n  font-weight: 400;\r\n  padding: 0.65em;\r\n  text-align: center;\r\n}\r\n\r\n.disabled td {\r\n  color: #4F5F64;\r\n}\r\n\r\ntbody tr {\r\n  transition: background 0.25s ease;\r\n}\r\n\r\ntbody tr:hover {\r\n  background: #014055;\r\n}\r\n</style>"],"mappings":"AAuCA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,yBAAyB;AAE5C,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,EAAE;MAChBC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAE,EAAE;MACZC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,UAAU,EAAC;IACTP;EACF,CAAC;EACDQ,QAAQ,EAAE;IACRC,qBAAqBA,CAAA,EAAG;MACtB,OAAO,IAAI,CAACN,YAAY,CAACO,MAAM,CAACC,IAAG,IACjCA,IAAI,CAACC,UAAU,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACR,SAAS,CAACO,WAAW,CAAC,CAAC,KACnEF,IAAI,CAACI,MAAM,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACR,SAAS,CAACO,WAAW,CAAC,CAAC,KAC/DF,IAAI,CAACK,OAAO,CAACH,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACR,SAAS,CAACO,WAAW,CAAC,CAAC,CAClE,CAAC;IACH;EACF,CAAC;EACDI,OAAO,EAAE;IACP,MAAMC,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMpB,KAAK,CAACqB,GAAG,CAC9B,gDAAgD,EAChD;UACEC,OAAO,EAAE;YACPC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;UAC/D;QACF,CACF,CAAC;QACD,IAAIL,QAAQ,CAACM,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAI,CAACtB,YAAW,GAAIgB,QAAQ,CAACjB,IAAI;QACnC,OAAO;UACLwB,OAAO,CAACC,KAAK,CAAC,gCAAgC,CAAC;QACjD;MACF,EAAE,OAAOA,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;IACF;EAEF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACV,iBAAiB,CAAC,CAAC;EAC1B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}