{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-36ce89e6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"librarian-dashboard\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"dashboard-title\"\n}, \"Librarian Dashboard\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"chart-container\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"\"\n};\nconst _hoisted_5 = {\n  class: \"chart-card\",\n  style: {\n    \"margin-bottom\": \"5%\"\n  }\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Book Distribution by Section\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 1,\n  class: \"\"\n};\nconst _hoisted_8 = {\n  class: \"chart-card\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Book Issuances Trend Over Time\", -1 /* HOISTED */));\nconst _hoisted_10 = {\n  key: 2,\n  class: \"\"\n};\nconst _hoisted_11 = {\n  class: \"chart-card\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Books Issued per Section\", -1 /* HOISTED */));\nconst _hoisted_13 = {\n  key: 0,\n  class: \"chart-item\"\n};\nconst _hoisted_14 = {\n  class: \"chart-card\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Books by Ratings\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavBar = _resolveComponent(\"NavBar\");\n  const _component_ChartBar = _resolveComponent(\"ChartBar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_NavBar), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Row 1 \"), $data.distributionData.labels && $data.distributionData.labels.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createVNode(_component_ChartBar, {\n    \"chart-data\": $data.distributionData,\n    \"chart-type\": \"pie\",\n    options: $data.options\n  }, null, 8 /* PROPS */, [\"chart-data\", \"options\"])])])) : _createCommentVNode(\"v-if\", true), $data.issuancesData.labels && $data.issuancesData.labels.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createVNode(_component_ChartBar, {\n    \"chart-data\": $data.issuancesData,\n    \"chart-type\": \"line\",\n    options: $data.options\n  }, null, 8 /* PROPS */, [\"chart-data\", \"options\"])])])) : _createCommentVNode(\"v-if\", true), $data.issuedData.labels && $data.issuedData.labels.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createVNode(_component_ChartBar, {\n    \"chart-data\": $data.issuedData,\n    \"chart-type\": \"doughnut\",\n    options: $data.options\n  }, null, 8 /* PROPS */, [\"chart-data\", \"options\"])])])) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Row 2 \"), $data.ratingsData.labels && $data.ratingsData.labels.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _createVNode(_component_ChartBar, {\n    \"chart-data\": $data.ratingsData,\n    \"chart-type\": \"bar\",\n    options: {\n      scales: {\n        x: {\n          beginAtZero: false,\n          suggestedMin: 0,\n          suggestedMax: 10,\n          ticks: {\n            stepSize: 1\n          }\n        },\n        y: {\n          beginAtZero: true,\n          suggestedMin: 0,\n          suggestedMax: 5,\n          ticks: {\n            stepSize: 1\n          }\n        }\n      }\n    }\n  }, null, 8 /* PROPS */, [\"chart-data\"])])])) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","key","style","_createElementBlock","_Fragment","_createVNode","_component_NavBar","_hoisted_1","_hoisted_2","_hoisted_3","_createCommentVNode","$data","distributionData","labels","length","_hoisted_4","_hoisted_5","_hoisted_6","_component_ChartBar","options","issuancesData","_hoisted_7","_hoisted_8","_hoisted_9","issuedData","_hoisted_10","_hoisted_11","_hoisted_12","ratingsData","_hoisted_13","_hoisted_14","_hoisted_15"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\National-Library-LMS\\Library_Code\\frontend_library\\src\\views\\Librarian\\StatsDashboard.vue"],"sourcesContent":["<template>\r\n  <NavBar/>\r\n  <div class=\"librarian-dashboard\">\r\n    <h1 class=\"dashboard-title\">Librarian Dashboard</h1>\r\n    <div class=\"chart-container\" >\r\n      <!-- Row 1 -->\r\n      <div class=\"\" v-if=\"distributionData.labels && distributionData.labels.length\">\r\n        <div class=\"chart-card\" style=\"margin-bottom:5%;\">\r\n          <h2>Book Distribution by Section</h2>\r\n          <ChartBar :chart-data=\"distributionData\" chart-type=\"pie\" :options=\"options\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"\" v-if=\"issuancesData.labels && issuancesData.labels.length\">\r\n        <div class=\"chart-card\">\r\n          <h2>Book Issuances Trend Over Time</h2>\r\n          <ChartBar :chart-data=\"issuancesData\" chart-type=\"line\" :options=\"options\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"\" v-if=\"issuedData.labels && issuedData.labels.length\">\r\n        <div class=\"chart-card\">\r\n          <h2 >Books Issued per Section</h2>\r\n          <ChartBar :chart-data=\"issuedData\" chart-type=\"doughnut\" :options=\"options\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <!-- Row 2 -->\r\n      <div class=\"chart-item\" v-if=\"ratingsData.labels && ratingsData.labels.length\">\r\n        <div class=\"chart-card\">\r\n          <h2>Books by Ratings</h2>\r\n          <ChartBar :chart-data=\"ratingsData\" chart-type=\"bar\" :options=\"{\r\n            scales: {\r\n              x: {\r\n                beginAtZero: false,\r\n                suggestedMin: 0,\r\n                suggestedMax: 10,\r\n                ticks: {\r\n                  stepSize: 1,\r\n                },\r\n              },\r\n              y: {\r\n                beginAtZero: true,\r\n                suggestedMin: 0,\r\n                suggestedMax: 5,\r\n                ticks: {\r\n                  stepSize: 1,\r\n                },\r\n              },\r\n            }\r\n          }\" />\r\n        </div>\r\n      </div>\r\n   \r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.librarian-dashboard {\r\n  padding: 20px;\r\n}\r\n\r\n.dashboard-title {\r\n  margin-top: 20px;\r\n  margin-bottom: 30px;\r\n  text-align: center;\r\n  color: #333;\r\n}\r\n\r\n.chart-container {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n}\r\n\r\n.chart-item {\r\n  width: 100%; /* Adjust the width as needed */\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.chart-card {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\ncanvas {\r\n  width: 100%;\r\n  height: 300px; /* Set the height as per your requirement */\r\n}\r\n</style>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport ChartBar from '@/components/ChartBar.vue';\r\nimport { getRandomColorArray } from '@/utils/colors'; // Import color utility\r\nimport NavBar from '@/components/NavBar.vue';\r\n\r\nexport default {\r\n  name: 'StatsDashboard',\r\n  components: {\r\n    ChartBar,\r\n    NavBar\r\n  },\r\n  data() {\r\n    return {\r\n      distributionData: {},\r\n      issuancesData: {},\r\n      issuedData: {},\r\n      ratingsData: {},\r\n      options: {\r\n        responsive: true,\r\n        scales: {\r\n          y: {\r\n            beginAtZero: true\r\n          }\r\n        }\r\n      },\r\n    };\r\n  },\r\n  async mounted() {\r\n  try {\r\n    await this.fetchDistributionData();\r\n    await this.fetchIssuancesData();\r\n    await this.fetchIssuedData();\r\n    await this.fetchRatingsData();\r\n  } catch (error) {\r\n    console.error('Error fetching data:', error.message);\r\n  }\r\n},\r\n\r\n  methods: {\r\n\r\n    async fetchDistributionData() {\r\n      try {\r\n        const response = await axios.get('http://127.0.0.1:5000/api/section/books/distribution', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n          },\r\n        });\r\n        this.distributionData = {\r\n          labels: response.data.labels,\r\n          datasets: [{\r\n            label: 'Books',\r\n            backgroundColor: getRandomColorArray(response.data.labels.length),\r\n            data: response.data.data,\r\n          }],\r\n        };\r\n      } catch (error) {\r\n        console.error('Error fetching book distribution data:', error.message);\r\n      }\r\n    },\r\n    async fetchIssuancesData() {\r\n      try {\r\n        const response = await axios.get('http://127.0.0.1:5000/api/book/issuances/trend', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n          },\r\n        });\r\n        this.issuancesData = {\r\n          labels: response.data.labels,\r\n          datasets: [{\r\n            label: 'Issuances',\r\n            backgroundColor: getRandomColorArray(response.data.labels.length),\r\n            data: response.data.data,\r\n          }],\r\n        };\r\n      } catch (error) {\r\n        console.error('Error fetching book issuances trend data:', error.message);\r\n      }\r\n    },\r\n    async fetchIssuedData() {\r\n      try {\r\n        const response = await axios.get('http://127.0.0.1:5000/api/section/books/issued', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n          },\r\n        });\r\n        this.issuedData = {\r\n          labels: response.data.labels,\r\n          datasets: [{\r\n            label: 'Books Issued',\r\n            backgroundColor: getRandomColorArray(response.data.labels.length),\r\n            data: response.data.data,\r\n          }],\r\n        };\r\n      } catch (error) {\r\n        console.error('Error fetching books issued per section data:', error.message);\r\n      }\r\n    },\r\n    async fetchRatingsData() {\r\n      try {\r\n        const response = await axios.get('http://127.0.0.1:5000/api/books/ratings', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n          },\r\n        });\r\n        this.ratingsData = {\r\n          labels: response.data.labels,\r\n          datasets: [{\r\n            label: 'Ratings',\r\n            backgroundColor:'dodgerblue',\r\n            data: response.data.data,\r\n          }],\r\n        };\r\n        console.log(this.ratingsData);\r\n      } catch (error) {\r\n        console.error('Error fetching books by ratings data:', error.message);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"],"mappings":";;;EAEOA,KAAK,EAAC;AAAqB;gEAC9BC,mBAAA,CAAoD;EAAhDD,KAAK,EAAC;AAAiB,GAAC,qBAAmB;;EAC1CA,KAAK,EAAC;AAAiB;;EAJhCE,GAAA;EAMWF,KAAK,EAAC;;;EACJA,KAAK,EAAC,YAAY;EAACG,KAAyB,EAAzB;IAAA;EAAA;;gEACtBF,mBAAA,CAAqC,YAAjC,8BAA4B;;EAR1CC,GAAA;EAYWF,KAAK,EAAC;;;EACJA,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAuC,YAAnC,gCAA8B;;EAd5CC,GAAA;EAkBWF,KAAK,EAAC;;;EACJA,KAAK,EAAC;AAAY;iEACrBC,mBAAA,CAAkC,YAA7B,0BAAwB;;EApBvCC,GAAA;EA0BWF,KAAK,EAAC;;;EACJA,KAAK,EAAC;AAAY;iEACrBC,mBAAA,CAAyB,YAArB,kBAAgB;;;;uBA5B9BG,mBAAA,CAAAC,SAAA,SACEC,YAAA,CAASC,iBAAA,GACTN,mBAAA,CAkDM,OAlDNO,UAkDM,GAjDJC,UAAoD,EACpDR,mBAAA,CAoBM,OApBNS,UAoBM,GAnBJC,mBAAA,WAAc,EACMC,KAAA,CAAAC,gBAAgB,CAACC,MAAM,IAAIF,KAAA,CAAAC,gBAAgB,CAACC,MAAM,CAACC,MAAM,I,cAA7EX,mBAAA,CAKM,OALNY,UAKM,GAJJf,mBAAA,CAGM,OAHNgB,UAGM,GAFJC,UAAqC,EACrCZ,YAAA,CAA8Ea,mBAAA;IAAnE,YAAU,EAAEP,KAAA,CAAAC,gBAAgB;IAAE,YAAU,EAAC,KAAK;IAAEO,OAAO,EAAER,KAAA,CAAAQ;4DAT9ET,mBAAA,gBAY0BC,KAAA,CAAAS,aAAa,CAACP,MAAM,IAAIF,KAAA,CAAAS,aAAa,CAACP,MAAM,CAACC,MAAM,I,cAAvEX,mBAAA,CAKM,OALNkB,UAKM,GAJJrB,mBAAA,CAGM,OAHNsB,UAGM,GAFJC,UAAuC,EACvClB,YAAA,CAA4Ea,mBAAA;IAAjE,YAAU,EAAEP,KAAA,CAAAS,aAAa;IAAE,YAAU,EAAC,MAAM;IAAED,OAAO,EAAER,KAAA,CAAAQ;4DAf5ET,mBAAA,gBAkB0BC,KAAA,CAAAa,UAAU,CAACX,MAAM,IAAIF,KAAA,CAAAa,UAAU,CAACX,MAAM,CAACC,MAAM,I,cAAjEX,mBAAA,CAKM,OALNsB,WAKM,GAJJzB,mBAAA,CAGM,OAHN0B,WAGM,GAFJC,WAAkC,EAClCtB,YAAA,CAA8Ea,mBAAA;IAAnE,YAAU,EAAEP,KAAA,CAAAa,UAAU;IAAE,YAAU,EAAC,UAAU;IAAEL,OAAO,EAAER,KAAA,CAAAQ;4DArB7ET,mBAAA,e,GAyBMA,mBAAA,WAAc,EACgBC,KAAA,CAAAiB,WAAW,CAACf,MAAM,IAAIF,KAAA,CAAAiB,WAAW,CAACf,MAAM,CAACC,MAAM,I,cAA7EX,mBAAA,CAwBM,OAxBN0B,WAwBM,GAvBJ7B,mBAAA,CAsBM,OAtBN8B,WAsBM,GArBJC,WAAyB,EACzB1B,YAAA,CAmBKa,mBAAA;IAnBM,YAAU,EAAEP,KAAA,CAAAiB,WAAW;IAAE,YAAU,EAAC,KAAK;IAAET,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;iDA7BzET,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}