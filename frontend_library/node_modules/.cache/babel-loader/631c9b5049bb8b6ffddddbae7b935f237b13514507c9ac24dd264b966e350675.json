{"ast":null,"code":"import axios from \"axios\";\nimport NavBar from \"../../components/NavBar.vue\";\nexport default {\n  name: \"BooksbySection\",\n  props: [\"id\", \"name\"],\n  data() {\n    return {\n      books: [],\n      newBook: {\n        title: \"\",\n        authorName: \"\",\n        content: \"\",\n        section: \"\",\n        isbn: \"\"\n      }\n    };\n  },\n  components: {\n    NavBar\n  },\n  methods: {\n    async addBook() {\n      try {\n        this.newBook.section = this.name;\n        const response = await axios.post(\"http://127.0.0.1:5000/api/add/book\", this.newBook, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        alert(response.data.message);\n        this.newBook = {\n          title: \"\",\n          authorName: \"\",\n          content: \"\",\n          isbn: \"\"\n        };\n        this.fetchSectionBooks();\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Error adding book:\", error);\n      }\n    },\n    toggleEditMode(book) {\n      book.editable = !book.editable;\n    },\n    async saveChanges(book) {\n      try {\n        const response = await axios.put(`http://127.0.0.1:5000/api/books/update`, {\n          book_id: book.book_id,\n          book_name: book.book_name,\n          author: book.author,\n          isbn: book.isbn\n        }, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        if (response.status === 200) {\n          console.log(\"Book updated: \", response.data);\n          alert(\"Book updated successfully!\");\n          book.editable = false;\n          this.fetchSectionBooks();\n        } else {\n          console.error(\"Failed to update book: \", response.data.error);\n        }\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Failed to update book: \", error.message);\n      }\n    },\n    async fetchSectionBooks() {\n      try {\n        const response = await axios.post(\"http://127.0.0.1:5000/api/fetch/section/books\", {\n          section_id: this.id\n        }, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        if (response.status === 200) {\n          console.log(\"Section Books:\", response.data);\n          this.books = response.data;\n          this.books.forEach(book => {\n            book.editable = false;\n          });\n        } else {\n          console.error(\"Failed to fetch section books: \", response.data.error);\n        }\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Failed to fetch section books: \", error.message);\n      }\n    },\n    async deleteBook(book_id) {\n      try {\n        const response = await axios.delete(`http://127.0.0.1:5000/api/books/delete`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          },\n          data: {\n            book_id: book_id\n          }\n        });\n        console.log(response.data);\n        this.fetchSectionBooks();\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Failed to delete book: \", error.message);\n      }\n    }\n  },\n  mounted() {\n    this.fetchSectionBooks();\n  }\n};","map":{"version":3,"names":["axios","NavBar","name","props","data","books","newBook","title","authorName","content","section","isbn","components","methods","addBook","response","post","headers","Authorization","localStorage","getItem","alert","message","fetchSectionBooks","error","console","toggleEditMode","book","editable","saveChanges","put","book_id","book_name","author","status","log","section_id","id","forEach","deleteBook","delete","mounted"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\National-Library-LMS\\Library_Code\\frontend_library\\src\\views\\Librarian\\BooksbySection.vue"],"sourcesContent":["<template>\n  <div>\n    <NavBar />\n\n      \n  <div class=\"card text-center mt-4 bg-dark text-white\" style=\"width:40%;justify-content: center;margin-left:30%;margin-bottom: 2%;\">\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Add Books to {{ name }} section</h5>\n      <hr class=\"bg-white\" />\n      <div class=\"form\">\n      <form @submit.prevent=\"addBook\">\n        <div class=\"field\">\n          <label class=\"label\">Book Title</label>\n          <div class=\"control\">\n            <input v-model=\"newBook.title\" class=\"input\" type=\"text\" placeholder=\"Book Title\" required>\n          </div>\n        </div>\n\n        <div class=\"field\">\n          <label class=\"label\">Author Name</label>\n          <div class=\"control\">\n            <input v-model=\"newBook.authorName\" class=\"input\" type=\"text\" placeholder=\"Author Name\" required>\n          </div>\n        </div>\n        <div class=\"field\">\n          <label class=\"label\">ISBN</label>\n          <div class=\"control\">\n            <input v-model=\"newBook.isbn\" class=\"input\" placeholder=\"ISBN\" required>\n          </div>\n        </div>\n        <div class=\"field\">\n          <label class=\"label\">Content</label>\n          <div class=\"control\">\n            <textarea v-model=\"newBook.content\" class=\"textarea\" placeholder=\"Content\" required></textarea>\n          </div>\n        </div>\n\n      \n\n        <button type=\"submit\" class=\"btn btn-success rounded-pill px-4 py-2\" style=\"border-color: aqua;\">Add</button>\n      </form>\n    </div>\n  </div>\n</div>\n\n   \n\n              <hr>\n                <h4 style=\"text-align: center;\">{{name}} Books</h4>\n           \n              \n                <div v-if=\"books.length > 0\" style=\"width:100%\">\n                  <table class=\"center-table\">\n                    <thead>\n                      <tr>\n                        <th>Book Name</th>\n                        <th>Author</th>\n                        <th>ISBN</th>\n                        <th>Function</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr v-for=\"book in books\" :key=\"book.book_id\">\n                        <td v-if=\"book.editable\">\n                          <input v-model=\"book.book_name\" class=\"form-control\" type=\"text\" required>\n                        </td>\n                        <td v-else>{{ book.book_name }}</td>\n                        <td v-if=\"book.editable\">\n                          <input v-model=\"book.author\" class=\"form-control\" type=\"text\" required>\n                        </td>\n                        <td v-else>{{ book.author }}</td>\n                        <td v-if=\"book.editable\">\n                          <input v-model=\"book.isbn\" class=\"form-control\" type=\"text\" required>\n                        </td>\n                        <td v-else>{{ book.isbn }}</td>\n                        <td>\n                          <div class=\"buttons\">\n                            <button v-if=\"book.editable\" class=\"btn btn-primary\" @click=\"saveChanges(book)\">Save</button>\n                            <button v-else class=\"btn btn-primary center\" @click=\"toggleEditMode(book)\">Edit</button>\n                            <button class=\"btn btn-danger center\" @click=\"deleteBook(book.book_id)\">Delete</button>\n                          </div>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n                <div v-else>\n                  <p>This section has no books.Add some to view...</p>\n                </div>\n              \n            </div>\n          \n     \n \n</template>\n\n<script>\nimport axios from \"axios\";\nimport NavBar from \"../../components/NavBar.vue\";\n\nexport default {\n  name: \"BooksbySection\",\n  props: [\"id\", \"name\"],\n  data() {\n    return {\n      books: [],\n      newBook: {\n        title: \"\",\n        authorName: \"\",\n        content: \"\",\n        section: \"\",\n        isbn:\"\",\n      },\n    };\n  },\n  components: {\n    NavBar,\n  },\n  methods: {\n    async addBook() {\n      try {\n        this.newBook.section= this.name;\n        const response = await axios.post(\n          \"http://127.0.0.1:5000/api/add/book\",\n          this.newBook,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n            },\n          }\n        );\n        alert(response.data.message);\n        this.newBook = {\n          title: \"\",\n          authorName: \"\",\n          content: \"\",\n          isbn:\"\",\n          \n        };\n        this.fetchSectionBooks();\n      } catch (error) {\n          alert(error.response.data.error);\n          \n        \n        console.error(\"Error adding book:\", error);\n      }\n    },\n    toggleEditMode(book) {\n      book.editable = !book.editable;\n    },\n    async saveChanges(book) {\n      try {\n        const response = await axios.put(\n          `http://127.0.0.1:5000/api/books/update`,\n          {\n            book_id: book.book_id,\n            book_name: book.book_name,\n            author: book.author,\n            isbn: book.isbn,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n            },\n          }\n        );\n        if (response.status === 200) {\n          console.log(\"Book updated: \", response.data);\n          alert(\"Book updated successfully!\");\n          book.editable = false;\n          this.fetchSectionBooks();\n        } else {\n          console.error(\"Failed to update book: \", response.data.error);\n        }\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Failed to update book: \", error.message);\n      }\n    },\n    async fetchSectionBooks() {\n      try {\n        const response = await axios.post(\n          \"http://127.0.0.1:5000/api/fetch/section/books\",\n          {\n            section_id: this.id,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n            },\n          }\n        );\n\n        if (response.status === 200) {\n          console.log(\"Section Books:\", response.data);\n          this.books = response.data;\n          this.books.forEach((book) => {\n            book.editable = false;\n          });\n        } else {\n          console.error(\"Failed to fetch section books: \", response.data.error);\n        }\n      } catch (error) {\n          alert(error.response.data.error);\n        console.error(\"Failed to fetch section books: \", error.message);\n      }\n    },\n    async deleteBook(book_id) {\n      try {\n        const response = await axios.delete(\n          `http://127.0.0.1:5000/api/books/delete`,\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n            },\n            data: { book_id: book_id },\n          }\n        );\n        console.log(response.data);\n        this.fetchSectionBooks();\n      } catch (error) {\n        alert(error.response.data.error);\n        console.error(\"Failed to delete book: \", error.message);\n      }\n    },\n  },\n  mounted() {\n    this.fetchSectionBooks();\n  },\n};\n</script>\n\n<style scoped>\n.card.text-center.mt-4.bg-dark {\n  border: 1px solid #333;\n  border-radius: 0.5rem;\n}\n\n.card-title, .card-text {\n  color: #fff;\n}\n\n.field {\n  margin-bottom: 1rem;\n}\n\n.label {\n  color: #fff;\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n}\n\n.input,\n.textarea {\n  background-color: white;\n  border: 1px solid #444;\n  border-radius: 0.25rem;\n  color: green;\n  font-weight: bold;\n  padding: 0.5rem;\n  width: 100%;\n}\n\n.textarea {\n  resize: vertical;\n  min-height: 100px;\n}\n\n.btn-success {\n  background-color: transparent;\n  border:#fff;\n  color: #fff;\n  cursor: pointer;\n}\n\n.btn-success:hover {\n  background-color: #1e7c31;\n}\n\n.form {\n  background:rgba(#13232f,.9);\n  padding: 20px;\n  max-width:600px;\n  border-radius:4px;\n  box-shadow:0 4px 10px 4px rgba(#13232f,.3);\n}\n.add-sections {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.delete {\n  margin: 10px 10px;\n  color: white;\n  background-color: #f13535;\n}\n\n.delete:hover {\n  background-color: #aa0000;\n}\n\n.btn {\n\n  justify-content: space-around;\n  align-items: center;\n  padding: 5%;\n  margin:2%;\n}\n\n\n*, *:before, *:after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n\ntable {\n  width:100%;\n  background: #333;\n  border-radius: 0.25em;\n  border-collapse: collapse;\n  margin: 1em;\n}\nth {\n  border-bottom: 1px solid #364043;\n  color: #E2B842;\n  font-size: 0.85em;\n  font-weight: 600;\n  padding: 0.5em 1em;\n  text-align: left;\n}\ntd {\n  color: #fff;\n  font-weight: 400;\n  padding: 0.65em 1em;\n  text-align: left;\n}\n.disabled td {\n  color: #4F5F64;\n}\ntbody tr {\n  transition: background 0.25s ease;\n}\ntbody tr:hover {\n  background: #014055;\n}\n\n\n\n</style>\n"],"mappings":"AAiGA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,6BAA6B;AAEhD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAE,CAAC,IAAI,EAAE,MAAM,CAAC;EACrBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;QACPC,KAAK,EAAE,EAAE;QACTC,UAAU,EAAE,EAAE;QACdC,OAAO,EAAE,EAAE;QACXC,OAAO,EAAE,EAAE;QACXC,IAAI,EAAC;MACP;IACF,CAAC;EACH,CAAC;EACDC,UAAU,EAAE;IACVX;EACF,CAAC;EACDY,OAAO,EAAE;IACP,MAAMC,OAAOA,CAAA,EAAG;MACd,IAAI;QACF,IAAI,CAACR,OAAO,CAACI,OAAO,GAAE,IAAI,CAACR,IAAI;QAC/B,MAAMa,QAAO,GAAI,MAAMf,KAAK,CAACgB,IAAI,CAC/B,oCAAoC,EACpC,IAAI,CAACV,OAAO,EACZ;UACEW,OAAO,EAAE;YACPC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;UAC/D;QACF,CACF,CAAC;QACDC,KAAK,CAACN,QAAQ,CAACX,IAAI,CAACkB,OAAO,CAAC;QAC5B,IAAI,CAAChB,OAAM,GAAI;UACbC,KAAK,EAAE,EAAE;UACTC,UAAU,EAAE,EAAE;UACdC,OAAO,EAAE,EAAE;UACXE,IAAI,EAAC;QAEP,CAAC;QACD,IAAI,CAACY,iBAAiB,CAAC,CAAC;MAC1B,EAAE,OAAOC,KAAK,EAAE;QACZH,KAAK,CAACG,KAAK,CAACT,QAAQ,CAACX,IAAI,CAACoB,KAAK,CAAC;QAGlCC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC5C;IACF,CAAC;IACDE,cAAcA,CAACC,IAAI,EAAE;MACnBA,IAAI,CAACC,QAAO,GAAI,CAACD,IAAI,CAACC,QAAQ;IAChC,CAAC;IACD,MAAMC,WAAWA,CAACF,IAAI,EAAE;MACtB,IAAI;QACF,MAAMZ,QAAO,GAAI,MAAMf,KAAK,CAAC8B,GAAG,CAC7B,wCAAuC,EACxC;UACEC,OAAO,EAAEJ,IAAI,CAACI,OAAO;UACrBC,SAAS,EAAEL,IAAI,CAACK,SAAS;UACzBC,MAAM,EAAEN,IAAI,CAACM,MAAM;UACnBtB,IAAI,EAAEgB,IAAI,CAAChB;QACb,CAAC,EACD;UACEM,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;UAC/D;QACF,CACF,CAAC;QACD,IAAIL,QAAQ,CAACmB,MAAK,KAAM,GAAG,EAAE;UAC3BT,OAAO,CAACU,GAAG,CAAC,gBAAgB,EAAEpB,QAAQ,CAACX,IAAI,CAAC;UAC5CiB,KAAK,CAAC,4BAA4B,CAAC;UACnCM,IAAI,CAACC,QAAO,GAAI,KAAK;UACrB,IAAI,CAACL,iBAAiB,CAAC,CAAC;QAC1B,OAAO;UACLE,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAET,QAAQ,CAACX,IAAI,CAACoB,KAAK,CAAC;QAC/D;MACF,EAAE,OAAOA,KAAK,EAAE;QACdH,KAAK,CAACG,KAAK,CAACT,QAAQ,CAACX,IAAI,CAACoB,KAAK,CAAC;QAChCC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAACF,OAAO,CAAC;MACzD;IACF,CAAC;IACD,MAAMC,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACF,MAAMR,QAAO,GAAI,MAAMf,KAAK,CAACgB,IAAI,CAC/B,+CAA+C,EAC/C;UACEoB,UAAU,EAAE,IAAI,CAACC;QACnB,CAAC,EACD;UACEpB,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;UAC/D;QACF,CACF,CAAC;QAED,IAAIL,QAAQ,CAACmB,MAAK,KAAM,GAAG,EAAE;UAC3BT,OAAO,CAACU,GAAG,CAAC,gBAAgB,EAAEpB,QAAQ,CAACX,IAAI,CAAC;UAC5C,IAAI,CAACC,KAAI,GAAIU,QAAQ,CAACX,IAAI;UAC1B,IAAI,CAACC,KAAK,CAACiC,OAAO,CAAEX,IAAI,IAAK;YAC3BA,IAAI,CAACC,QAAO,GAAI,KAAK;UACvB,CAAC,CAAC;QACJ,OAAO;UACLH,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAET,QAAQ,CAACX,IAAI,CAACoB,KAAK,CAAC;QACvE;MACF,EAAE,OAAOA,KAAK,EAAE;QACZH,KAAK,CAACG,KAAK,CAACT,QAAQ,CAACX,IAAI,CAACoB,KAAK,CAAC;QAClCC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAACF,OAAO,CAAC;MACjE;IACF,CAAC;IACD,MAAMiB,UAAUA,CAACR,OAAO,EAAE;MACxB,IAAI;QACF,MAAMhB,QAAO,GAAI,MAAMf,KAAK,CAACwC,MAAM,CAChC,wCAAuC,EACxC;UACEvB,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;UAC/D,CAAC;UACDhB,IAAI,EAAE;YAAE2B,OAAO,EAAEA;UAAQ;QAC3B,CACF,CAAC;QACDN,OAAO,CAACU,GAAG,CAACpB,QAAQ,CAACX,IAAI,CAAC;QAC1B,IAAI,CAACmB,iBAAiB,CAAC,CAAC;MAC1B,EAAE,OAAOC,KAAK,EAAE;QACdH,KAAK,CAACG,KAAK,CAACT,QAAQ,CAACX,IAAI,CAACoB,KAAK,CAAC;QAChCC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAACF,OAAO,CAAC;MACzD;IACF;EACF,CAAC;EACDmB,OAAOA,CAAA,EAAG;IACR,IAAI,CAAClB,iBAAiB,CAAC,CAAC;EAC1B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}