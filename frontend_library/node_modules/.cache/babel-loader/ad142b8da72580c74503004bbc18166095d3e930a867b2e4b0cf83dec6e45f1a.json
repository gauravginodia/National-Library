{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-601bb39f\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  style: {\n    \"text-align\": \"center\",\n    \"margin-top\": \"2.5%\"\n  }\n}, \"You have returned these books:\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  class: \"table center-table\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Book Name\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Author\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Section\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Feedback Given\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Rating Given\")])], -1 /* HOISTED */));\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Not found\", -1 /* HOISTED */));\nconst _hoisted_7 = [_hoisted_6];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavBar = _resolveComponent(\"NavBar\");\n  const _component_FootBar = _resolveComponent(\"FootBar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [_createVNode(_component_NavBar), _hoisted_1, _withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"width\": \"100%\",\n      \"padding\": \"0.5%\",\n      \"border-width\": \"0.5cap\",\n      \"border-radius\": \"10cqb\",\n      \"color\": \"black\",\n      \"font-weight\": \"700\",\n      \"font-size\": \"large\",\n      \"text-align\": \"center\",\n      \"border-color\": \"black\",\n      \"margin-bottom\": \"2%\"\n    },\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchBar = $event),\n    placeholder: \"Search by book or author or section\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchBar]]), $data.listreturned.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"table\", _hoisted_3, [_hoisted_4, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredReturnedBooks, book => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: book.book_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(book.book_title), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(book.author), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(book.section), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(book.feedback), 1 /* TEXT */), _createElementVNode(\"td\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(book.rating, i => {\n      return _openBlock(), _createElementBlock(\"span\", {\n        key: i\n      }, \"⭐\");\n    }), 128 /* KEYED_FRAGMENT */))])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [..._hoisted_7]))]), _createVNode(_component_FootBar)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","style","key","class","_hoisted_6","_createElementBlock","_Fragment","_createVNode","_component_NavBar","_hoisted_1","type","_cache","$event","$data","searchBar","placeholder","listreturned","length","_hoisted_2","_hoisted_3","_hoisted_4","_renderList","$options","filteredReturnedBooks","book","book_id","_toDisplayString","book_title","author","section","feedback","rating","i","_hoisted_5","_hoisted_7","_component_FootBar"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\National-Library-LMS\\Library_Code\\frontend_library\\src\\views\\User\\UserHistory.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <NavBar/>\r\n\r\n    <h2 style=\"text-align: center;margin-top:2.5%\">You have returned these books:</h2>\r\n    <input style=\"width:100%;padding: 0.5%;border-width:0.5cap;border-radius: 10cqb; color:black;font-weight: 700;font-size:large;text-align: center;border-color: black;margin-bottom:2%\" type=\"text\" v-model=\"searchBar\" placeholder=\"Search by book or author or section\">\r\n\r\n            <div v-if=\"listreturned.length > 0\">\r\n              <table class=\"table center-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Book Name</th>\r\n                    <th>Author</th>\r\n                    <th>Section</th>\r\n                    <th>Feedback Given</th>\r\n                    <th>Rating Given</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"book in filteredReturnedBooks\" :key=\"book.book_id\">\r\n                    <td>{{ book.book_title }}</td>\r\n                    <td>{{ book.author }}</td>\r\n                    <td>{{ book.section }}</td>\r\n                    <td>{{ book.feedback }}</td>\r\n                    <td><span v-for=\"i in book.rating\" :key=\"i\">⭐</span></td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n    \r\n            </div>\r\n            <div v-else>\r\n              <p>Not found</p>\r\n            </div>\r\n          </div>\r\n  \r\n  <FootBar/>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport NavBar from \"@/components/NavBar.vue\";\r\n\r\nexport default {\r\n  name: \"UserHistory\",\r\n  data() {\r\n    return {\r\n      listreturned: [],\r\n      rating: null,\r\n      comments: \"\",\r\n      searchBar: \"\",\r\n    };\r\n  },\r\n  components:{\r\n    NavBar,\r\n  },\r\n  computed: {\r\n    filteredReturnedBooks() {\r\n      return this.listreturned.filter(book =>\r\n        book.book_title.toLowerCase().includes(this.searchBar.toLowerCase()) ||\r\n        book.author.toLowerCase().includes(this.searchBar.toLowerCase()) ||\r\n        book.section.toLowerCase().includes(this.searchBar.toLowerCase())\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchlistreturned() {\r\n      try {\r\n        const response = await axios.get(\r\n          \"http://127.0.0.1:5000/api/fetch_returned_books\",\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\r\n            },\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          this.listreturned = response.data;\r\n        } else {\r\n          console.error(\"Failed to fetch returned books\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching returned books:\", error);\r\n      }\r\n    },\r\n    \r\n  },\r\n  mounted() {\r\n    this.fetchlistreturned();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn {\r\n\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  padding: 5%;\r\n  margin: 2%;\r\n}\r\n\r\n\r\n*,\r\n*:before,\r\n*:after {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n\r\ntable {\r\n  width: 90%;\r\n  background: #333;\r\n  border-radius: 0.25em;\r\n  border-collapse: collapse;\r\n  margin-left:5%;\r\n  margin-top: 2%;\r\n}\r\n\r\nth {\r\n  border-bottom: 1px solid #364043;\r\n  color: #E2B842;\r\n  font-size:large;\r\n  font-weight: 600;\r\n  padding: 0.3em 1em;\r\n  text-align: center;\r\n}\r\n\r\ntd {\r\n  color: #fff;\r\n  font-weight: 400;\r\n  padding: 0.65em;\r\n  text-align: center;\r\n}\r\n\r\n.disabled td {\r\n  color: #4F5F64;\r\n}\r\n\r\ntbody tr {\r\n  transition: background 0.25s ease;\r\n}\r\n\r\ntbody tr:hover {\r\n  background: #014055;\r\n}\r\n</style>"],"mappings":";;gEAIIA,mBAAA,CAAkF;EAA9EC,KAA0C,EAA1C;IAAA;IAAA;EAAA;AAA0C,GAAC,gCAA8B;;EAJjFC,GAAA;AAAA;;EAQqBC,KAAK,EAAC;AAAoB;gEAC/BH,mBAAA,CAQQ,gB,aAPNA,mBAAA,CAMK,a,aALHA,mBAAA,CAAkB,YAAd,WAAS,G,aACbA,mBAAA,CAAe,YAAX,QAAM,G,aACVA,mBAAA,CAAgB,YAAZ,SAAO,G,aACXA,mBAAA,CAAuB,YAAnB,gBAAc,G,aAClBA,mBAAA,CAAqB,YAAjB,cAAY,E;;EAfpCE,GAAA;AAAA;gEA+BcF,mBAAA,CAAgB,WAAb,WAAS;oBAAZI,UAAgB,C;;;;uBA/B9BC,mBAAA,CAAAC,SAAA,SACEN,mBAAA,CAgCc,cA/BZO,YAAA,CAASC,iBAAA,GAETC,UAAkF,E,gBAClFT,mBAAA,CAAyQ;IAAlQC,KAA+K,EAA/K;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA,CAA+K;IAACS,IAAI,EAAC,MAAM;IALtM,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKgNC,KAAA,CAAAC,SAAS,GAAAF,MAAA;IAAEG,WAAW,EAAC;iDAAvBF,KAAA,CAAAC,SAAS,E,GAElMD,KAAA,CAAAG,YAAY,CAACC,MAAM,Q,cAA9BZ,mBAAA,CAsBM,OA7BlBa,UAAA,GAQclB,mBAAA,CAmBQ,SAnBRmB,UAmBQ,GAlBNC,UAQQ,EACRpB,mBAAA,CAQQ,iB,kBAPNK,mBAAA,CAMKC,SAAA,QAzBvBe,WAAA,CAmBqCC,QAAA,CAAAC,qBAAqB,EAA7BC,IAAI;yBAAfnB,mBAAA,CAMK;MANsCH,GAAG,EAAEsB,IAAI,CAACC;QACnDzB,mBAAA,CAA8B,YAAA0B,gBAAA,CAAvBF,IAAI,CAACG,UAAU,kBACtB3B,mBAAA,CAA0B,YAAA0B,gBAAA,CAAnBF,IAAI,CAACI,MAAM,kBAClB5B,mBAAA,CAA2B,YAAA0B,gBAAA,CAApBF,IAAI,CAACK,OAAO,kBACnB7B,mBAAA,CAA4B,YAAA0B,gBAAA,CAArBF,IAAI,CAACM,QAAQ,kBACpB9B,mBAAA,CAAyD,c,kBAArDK,mBAAA,CAAgDC,SAAA,QAxBxEe,WAAA,CAwB0CG,IAAI,CAACO,MAAM,EAAhBC,CAAC;2BAAd3B,mBAAA,CAAgD;QAAhBH,GAAG,EAAE8B;MAAC,GAAE,GAAC;;yDAMrD3B,mBAAA,CAEM,OAhClB4B,UAAA,MAAAC,UAAA,I,GAmCE3B,YAAA,CAAU4B,kBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}